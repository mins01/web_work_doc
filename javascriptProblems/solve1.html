<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>자바스크립트 문제1</title>
<style type="text/css">
table.table{
	font-size:small;
	border-collapse:collapse;
	border:0px solid #cccccc;
}
table.table td{
	border:1px solid #cccccc;
}
table.table td.title{
	font-weight:bold;
	background-color:#AABBCC;
}
table.table td.none{
	border:0px solid #cccccc;
}
td.border{border:1px solid #cccccc;  }
li.border{border:1px solid #cccccc; margin:0 5px 5px 5px; padding:5px;}
li.border li.border{background-color:#f2f2f2;}
.classification{color:#0066CC;}
em.em{background-color:#FFFFcc;  margin:20px;}
</style>
<script type="text/javascript">
//<![CDATA[
var DATA = [
 {'key':1000,'upKey':null,'name':'A'}
,{'key':2000,'upKey':null,'name':'B'}
,{'key':3000,'upKey':null,'name':'C'}
,{'key':4000,'upKey':null,'name':'D'}
,{'key':1100,'upKey':1000,'name':'A1'}
,{'key':1200,'upKey':1000,'name':'A2'}
,{'key':1300,'upKey':1000,'name':'A3'}
,{'key':2100,'upKey':2000,'name':'B1'}
,{'key':2200,'upKey':2000,'name':'B2'}
,{'key':3100,'upKey':3000,'name':'C1'}
,{'key':1110,'upKey':1100,'name':'A11'}
,{'key':1120,'upKey':1100,'name':'A12'}
,{'key':1130,'upKey':1100,'name':'A13'}
,{'key':1210,'upKey':1200,'name':'A21'}
,{'key':3110,'upKey':3100,'name':'C11'}
,{'key':5110,'upKey':5100,'name':'E11'}
];

var ROOT = {};
var BYKEY = {};
for(var i=0,m=DATA.length;i<m;i++){
	DATA[i]['child'] = [];
	BYKEY[DATA[i]['key']] = DATA[i];
	if(!DATA[i]['upKey']) ROOT[DATA[i]['key']] = DATA[i];
	if(BYKEY[DATA[i]['upKey']]){
		//alert(DATA[i]['key']+'의 부모가 있음 : '+DATA[i]['upKey']);
		BYKEY[DATA[i]['upKey']]['child'].push(DATA[i]);
	}
	
}


function rcArray(ROOT,NAMEs){
	for(var x in ROOT){
		NAMEs.push(ROOT[x]['name']);
		if(ROOT[x]['child'].length>0){
			rcSubArray(ROOT[x]['child'],NAMEs);
		}
	}
}
function rcSubArray(CHILD,NAMEs){
	for(var i = 0, m = CHILD.length;i<m;i++){
		NAMEs.push(CHILD[i]['name']);
		if(CHILD[i]['child'].length>0){
			rcSubArray(CHILD[i]['child'],NAMEs);
		}	
	}
}
function solP1(){
	var NAMEs = new Array();
	rcArray(ROOT,NAMEs);
	alert(NAMEs.join("\n"));
	//document.write(NAMEs.join("\n"));
}
function solP2(){
	var R = ROOT;
	if(!R[1000]){
	alert('지정된 위치에 데이터가 없습니다. key 1000의 데이터가 없음');
	}else if(!R[1000]['child'][1])
	alert('지정된 위치에 데이터가 없습니다. key 1000의 두번째 하위메뉴가 없음');
	else if(!R[1000]['child'][1]['child'][0]){
	alert('지정된 위치에 데이터가 없습니다. key 1000의 두번째 하위메뉴의 첫번재 하위메뉴가 없음');	
	}else{
		
		alert(R[1000]['child'][1]['child'][0]['name']);
	}
}
//==================================
var DATA1 = [
 {'key':1000,'upKey':null,'name':'A'}
 ,{'key':1210,'upKey':1200,'name':'A21'}
 ,{'key':1300,'upKey':1000,'name':'A3'}
,{'key':2100,'upKey':2000,'name':'B1'}
,{'key':2200,'upKey':2000,'name':'B2'}
,{'key':3100,'upKey':3000,'name':'C1'}
,{'key':1110,'upKey':1100,'name':'A11'}
,{'key':2000,'upKey':null,'name':'B'}
,{'key':3000,'upKey':null,'name':'C'}
,{'key':1200,'upKey':1000,'name':'A2'}
,{'key':3110,'upKey':3100,'name':'C11'}
,{'key':4000,'upKey':null,'name':'D'}
,{'key':1100,'upKey':1000,'name':'A1'}
,{'key':1120,'upKey':1100,'name':'A12'}
,{'key':1130,'upKey':1100,'name':'A13'}
,{'key':5110,'upKey':5100,'name':'E11'}
];
var ROOT1 = {};
var BYKEY1 = {};
for(var i=0,m=DATA1.length;i<m;i++){
	DATA1[i]['child'] = [];
	BYKEY1[DATA1[i]['key']] = DATA1[i];
	if(!DATA1[i]['upKey']) ROOT1[DATA1[i]['key']] = DATA1[i];
	if(BYKEY1[DATA1[i]['upKey']]){
		//alert(DATA[i]['key']+'의 부모가 있음 : '+DATA[i]['upKey']);
		BYKEY1[DATA1[i]['upKey']]['child'].push(DATA1[i]);
	}
	
}
function solP14DATA1(){
	var NAMEs = new Array();
	rcArray(ROOT1,NAMEs);
	//document.write(NAMEs.join("\n"));
	alert(NAMEs.join("\n"));
}
function solP3(){
	var R = ROOT1;
	if(!R[1000]){
	alert('지정된 위치에 데이터가 없습니다. key 1000의 데이터가 없음');
	}else if(!R[1000]['child'][1])
	alert('지정된 위치에 데이터가 없습니다. key 1000의 두번째 하위메뉴가 없음');
	else if(!R[1000]['child'][1]['child'][0]){
	alert('지정된 위치에 데이터가 없습니다. key 1000의 두번째 하위메뉴의 첫번재 하위메뉴가 없음');	
	}else{
		
		alert(R[1000]['child'][1]['child'][0]['name']);
	}
}

//]]>
</script>
</head>



<body>
<ul>
	<li>출제정보
		<ul>
				<li>작성자 : 공대여자</li>
			<li>작성일 : 2008-11-21</li>
			<li>수정일 : </li>
			<li>HOME : <a href="http://www.mins01.com">http://www.mins01.com</a></li>
			<li>연락처 : mins01(at)lycos.co.kr (Mail,MSN,NateOn)</li>
			<li>목적
				<ul>
							<li>JS로 데이터를 재정렬하여 사용하는 방법을 익힌다.</li>
				</ul>
			</li>
			<li>제한사항
				<ul>
							<li>작성자 정보 수정 불가</li>
					<li>수정 후 재배포 가능</li>
				</ul>
			</li>
		</ul>
	</li>
	<li>데이터
		<ul>
				<li>
					<table border="1" cellpadding="2" cellspacing="2" class="table" style="border-collapse:separate">
						<tr>
							<td width="50">key</td>
							<td width="50">upKey</td>
							<td width="50">name</td>
						</tr>
						<tr>
							<td>1000</td>
							<td>&nbsp;</td>
							<td>A</td>
						</tr>
						<tr>
							<td>2000</td>
							<td>&nbsp;</td>
							<td>B</td>
						</tr>
						<tr>
							<td>3000</td>
							<td>&nbsp;</td>
							<td>C</td>
						</tr>
						<tr>
							<td>4000</td>
							<td>&nbsp;</td>
							<td>D</td>
						</tr>
						<tr>
							<td>1100</td>
							<td>1000</td>
							<td>A1</td>
						</tr>
						<tr>
							<td>1200</td>
							<td>1000</td>
							<td>A2</td>
						</tr>
						<tr>
							<td>1300</td>
							<td>1000</td>
							<td>A3</td>
						</tr>
						<tr>
							<td>2100</td>
							<td>2000</td>
							<td>B1</td>
						</tr>
						<tr>
							<td>2200</td>
							<td>2000</td>
							<td>B2</td>
						</tr>
						<tr>
							<td>3100</td>
							<td>3000</td>
							<td>C1</td>
						</tr>
						<tr>
							<td>1110</td>
							<td>1100</td>
							<td>A11</td>
						</tr>
						<tr>
							<td>1120</td>
							<td>1100</td>
							<td>A12</td>
						</tr>
						<tr>
							<td>1130</td>
							<td>1100</td>
							<td>A13</td>
						</tr>
						<tr>
							<td>1210</td>
							<td>1200</td>
							<td>A21</td>
						</tr>
						<tr>
							<td>3110</td>
							<td>3100</td>
							<td>C11</td>
						</tr>
						<tr>
							<td>5110</td>
							<td>5100</td>
							<td>E11</td>
						</tr>
					</table>
				</li>
			<li>데이터는 <br />
						<pre>var DATA = [
 {'key':1000,'upKey':null,'name':'A'}
, ....
,{'key':1100,'upKey':1000,'name':'A1'}
, ....
,{'key':1110,'upKey':1100,'name':'A11'}
]
			</pre>
				형식으로 DATA란 배열변수에 등록되어있다.</li>
		</ul>
	</li>
	<li>문제
		<ul>
				<li>1 .
					<ul>
							<li>DATA를 가지고 메뉴를 구성할려고한다.</li>
						<li>upKey는 자신의 상위요소의 key이다. upKey의 값이 없으면 최상위 메뉴이다.</li>
						<li>데이터가 부모 자식 관계에 맞도록 재정렬하여 출력하라.
							<ul>
										<li>지정된 부모가 없다면 그 값을 출력되지 않는다.(최상위 메뉴는 제외)</li>
							</ul>
						</li>
						<li>출력되는 값은 name만 들어있는 배열이다.</li>
					</ul>
				</li>
			<li>2 .
				<ul>
							<li>1번 문제에서 계속</li>
					<li>key 1000의 두번째하위메뉴에 첫번째 하위메뉴의 name를 출력하는 소스코드를 만들어라.(기본 정렬은 배열순)</li>
				</ul>
			</li>
			<li>3.
				<ul>
							<li>DATA의 순서를 뒤 섞을 경우 key 1000의 두번째 하위메뉴의 첫번째 하위메뉴의 name은 항상 같은가? 그러한 이유를 설명하라.</li>
				</ul>
			</li>
		</ul>
	</li>
	<li>참고
		<ul>
				<li>이 페이지 소스를 보면 DATA와 DATA1가 미리 정의되어있습니다. 그 데이터를 가지고 하시면 됩니다.</li>
			<li>지정됨 함수중 sol로 시작하는 함수는 결과를 출력하기 위한 함수입니다. 소스를 구성하여  버튼에 지정된 함수에서 지정된 결과가 나오도록 하시면 됩니다.</li>
		</ul>
	</li>
	<li>결과
		<ul>
			<li>1 : 
				<label>
				<input type="button" name="button" id="button" value="결과1" onclick="solP1()" />
				</label>
			</li>
			<li>2 :	
				<input type="button" name="button2" id="button2" value="결과2" onclick="solP2()" />
			</li>
			<li>3 :
				<input type="button" name="button3" id="button3" value="결과3" onclick="solP3()" />
				<input type="button" name="button4" id="button4" value="재정렬된 데이터순서" onclick="solP14DATA1()" />
			</li>
		</ul>
	</li>
</ul>
</body>
</html>
