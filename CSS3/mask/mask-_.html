<!doctype html>
<html lang="ko" >
<head>
	<title>style mask-*</title>
	<meta charset="utf-8">
	<meta http-equiv="Content-Script-Type" content="text/javascript">
	<meta http-equiv="Content-Style-Type" content="text/css">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="shortcut icon" href="http://www.mins01.com/favicon.ico">	
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<script src="/js/ForGoogle.js"></script>
	<!-- google analytics -->
	<script>if(window.ForGoogle){ ForGoogle.analytics() }else{ console.log("failure : ForGoogle.analytics()");}</script>
	

	<!-- jquery 관련 -->
	<script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>

	<!-- 부트스트랩 4 : IE8지원안됨! -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" crossorigin="anonymous"> 
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" crossorigin="anonymous"></script> 
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" crossorigin="anonymous"></script>
	<!-- vue.js -->
	<script src="https://cdn.jsdelivr.net/npm/vue"></script>
	
	<!-- meta og -->
	
	<meta property="og:title" content="style mask-*">
	<meta property="og:description" content="style mask-*">
	<meta name="og:image" content="http://www.mins01.com/img/logo.gif">
	<meta property="og:image:width" content="190">
	<meta property="og:image:height" content="70" />
	<meta property="og:site_name" content="style mask-*" />
	<meta property="og:type" content="website">
	
	<!-- //meta og -->
    <style>
        .flex-wrap{
            display: flex;
            gap: 20px;
            justify-content:center;
            margin:20px;
            margin-bottom: 80px;
        }
        .box-wrap{
            outline: 1px dashed #999;
            background-color: #abc;;
        }
        .box{
            width:200px;
            height: 200px;
            outline:2px solid #000;
            margin:0 auto;
        }

        .bg{
            background-image: linear-gradient(90deg,#000 0%, #f00 25%, #0f0 50%, #00f 75%, #fff 100%);
            background-image: url(361331715_1995055744165677_6676229993515938374_n.jpg);
            background-size: contain;
        }

        .bg-var{
            --bg-var:
            radial-gradient(ellipse 30px 40px at left 20% top 20%, #ffffffff 48%, transparent 50%, transparent 0 ),
            radial-gradient(ellipse 30px 40px at left 20% top 50%, #ffffff99 48%, transparent 50%, transparent 0 ),
            radial-gradient(ellipse 30px 40px at left 20% bottom 20%, #ffffff33 48%, transparent 50%, transparent 0 ),
            linear-gradient(#009900ff 100%,transparent 0),
            radial-gradient(ellipse 30px 40px at right 20% top 20%, #000000ff 48%, transparent 50%, transparent 0 ),
            radial-gradient(ellipse 30px 40px at right 20% top 50%, #00000099 48%, transparent 50%, transparent 0 ),
            radial-gradient(ellipse 30px 40px at right 20% bottom 20%, #00000033 48%, transparent 50%, transparent 0 )
            ;
            --bg-size:contain,contain,contain,60% 60%,contain,contain,contain;
            --bg-position:center center
        }

        .bg-var2{
            --bg-var:
            radial-gradient(ellipse 100px 100px at left 30% top 30%, #990000ff 48%, transparent 50%, transparent 0 ),
            linear-gradient(#009900ff 100%,transparent 0)
            ;
            --bg-size:contain,50% 50%;
            --bg-position:center center
        }
        .bg-var3{
            --bg-var:
            radial-gradient(ellipse 100px 100px at left 30% top 30%, #990000ff 48%, transparent 50%, transparent 0 ),
            linear-gradient(#009900ff 100%,transparent 0),
            radial-gradient(ellipse 100px 100px at right 30% bottom 30%, #000099ff 48%, transparent 50%, transparent 0 )
            ;
            --bg-size:contain,50% 50%,contain;
            --bg-position:center center
        }
        .bg-var4{
            --bg-var:
            radial-gradient(ellipse 100px 100px at left 30% top 30%, #990000ff 48%, transparent 50%, transparent 0 ),
            linear-gradient(#009900ff 100%,transparent 0),
            linear-gradient(#999900ff 100%,transparent 0),
            radial-gradient(ellipse 100px 100px at right 30% bottom 30%, #000099ff 48%, transparent 50%, transparent 0 )
            ;
            --bg-size:contain,80% 30%,30% 80%,contain;
            --bg-position:center center
        }

        .bg-var5{
            --bg-var:
            radial-gradient(ellipse 100px 100px at left 30% top 30%, transparent 48%, #990000aa 50%, #990000aa 0 ),
            linear-gradient(#009900ff 100%,transparent 0),
            linear-gradient(#999900ff 100%,transparent 0),
            radial-gradient(ellipse 100px 100px at right 30% bottom 30%, #000099ff 48%, transparent 50%, transparent 0 )
            ;
            --bg-size:contain,80% 30%,30% 80%,contain;
            --bg-position:center center
        }


        .bg-wrap .box{
            background-image:var(--bg-var);
            background-size: var(--bg-size);
            background-repeat: no-repeat;
            background-position: var(--bg-position);
        }
        .mask-image-wrap .box{
            mask-image:var(--bg-var);
            mask-size: var(--bg-size);
            mask-repeat: no-repeat;
            mask-position: var(--bg-position);

        }
        .-webkit-mask-image-wrap .box{
            -webkit-mask-image:var(--bg-var);
            -webkit-mask-size: var(--bg-size);
            -webkit-mask-repeat: no-repeat;
            -webkit-mask-position: var(--bg-position);
        }



        .mask-type-luminance-wrap .box{
            mask-type: luminance;
        }
        .mask-type-alpha-wrap .box{
            mask-type: alpha;
        }
        .mask-mode-luminance-wrap .box{
            mask-mode: luminance;
        }
        .mask-mode-alpha-wrap .box{
            mask-mode: alpha;
        }
        .mask-mode-match-source-wrap .box{
            mask-mode: match-source;
        }
        

        .mask-composite-wrap .box{
            mask-composite:add,add,add,subtract
        }
        .-webkit-mask-composite-wrap .box{
            -webkit-mask-composite:add,add,add,subtract; /* for FF*/
            -webkit-mask-composite:source-over,source-over,source-over,source-out,destination-out,destination-out; /* for chrome */
            
        }
    </style>
</head>
<body>
	<div class="container">
        <h1>mask-* , -webkit-mask-*</h1>
        <ul class="list-group">
            <li class="list-group-item">mask CSS 속성은 아이템이 부분적으로만 보여지게 하거나 혹은 완전히 가려서 보여지지 않게 할 수 있는 기능을 가지고 있습니다. 이 속성은 마스킹 혹은 특정한 점을 기준으로 이미지를 잘라내는 기능을 함께 제공합니다.</li>
            <li class="list-group-item"><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/mask">https://developer.mozilla.org/en-US/docs/Web/CSS/mask</a></li>
            <li class="list-group-item">mask-composite(FIRE FOX) , -webkit-mask-image(CHROME, SAFARI , ... )</li>
            <li class="list-group-item">파이어폭스만 mask-composite 를 지원한다, 향후 어떻게 바뀔지 모르겠다.</li>
            <li class="list-group-item">mask-composite 와 -webkit-mask-image 는 설정하는 값이 다르다!!</li>
        </ul>
	</div>
    <hr>
	<div class="container">
        <h2>브라우저 호환표</h2>
        <div class="table-retable-responsive">
            <table class="table table-sm table-bordered">
                <tr>
                    <th>CSS</th>
                    <th>FireFox</th>
                    <th>chrome, safari 등</th>
                    <th>비고</th>
                </tr>
                <tr><td>mask-image</td><td>O</td><td>X</td><td></td></tr>
                <tr><td>-webkit-mask-image</td><td>O</td><td>O</td><td></td></tr>
                <tr><td>mask-size</td><td>O</td><td>X</td><td></td></tr>
                <tr><td>-webkit-mask-size</td><td>O</td><td>O</td><td></td></tr>
                <tr><td>mask-repeat</td><td>O</td><td>X</td><td></td></tr>
                <tr><td>-webkit-mask-repeat</td><td>O</td><td>O</td><td></td></tr>
                <tr><td>mask-mask-position</td><td>O</td><td>X</td><td></td></tr>
                <tr><td>mask-mode</td><td>O</td><td>X</td><td></td></tr>
                <tr><td>mask-composite</td><td>O</td><td>X</td><td></td></tr>
                <tr><td>-webkit-mask-composite</td><td>O?</td><td>O</td><td>FireFox 도 -webkit-mask-image 를 지원하지만,mask-composite 의 별칭으로 지원한다. (즉, 설정 값은 add,subtract 등만 가능)</td></tr>
            </table>
        </div>
        <ul class="text-left">
            <li>FireFox 도 -webkit-mask-*의 대부분을 지원하므로, 호환성 생각한다면 -webkit-mask-* 를 같이 사용하라.</li>
        </ul>
        <hr>
        <h3>mask-composite vs -webkit-mask-image</h3>
        <div class="table-retable-responsive">
            <table class="table table-sm table-bordered">
                <tr>
                    <th>mask-composite(FireFox)</th>
                    <th>-webkit-mask-image (chrome, safari ...)</th>
                    <th>비고</th>
                </tr>
                <tr><td>add</td><td>source-over</td><td>합집합. 기본값</td></tr>
                <tr><td>subtract</td><td>source-out</td><td>차집합</td></tr>
                <tr><td>intersect</td><td>source-in</td><td>교집합</td></tr>
                <tr><td>exclude</td><td>xor</td><td>배타적 논리합</td></tr>
            </table>
        </div>

    </div>
    <hr>
    <div class="container py-3">
        <h2>예제</h2>
        <div>
            <h3>기본모양</h3>
            <div class="flex-wrap bg-var">
                <div class="box-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">배경모양</div>
                    <div class="text-center">배경모양</div>
                </div>
                <div class="box-wrap bg-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">마스크모양</div>
                    <div class="text-center">마스크모양</div>
                </div>
            </div>
            <h3>mask-image , -webkit-mask-image</h3>
            <div class="flex-wrap bg-var">
                <div class="box-wrap mask-image-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">mask-image</div>
                    <div class="text-center">FF:O , CHROME:X</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap">
                    <div class="box bg"></div>
                    <div class="text-center"><b>-webkit-mask-image</b></div>
                    <div class="text-center">FF:O , CHROME:O</div>
                </div>
            </div>
            <h3>mask-type :  css mask-* 와 상관 없다. svg 의 &lt;mask&gt; 제어용</h3>
            <div class="flex-wrap bg-var">
                <div class="box-wrap -webkit-mask-image-wrap mask-type-luminance-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">mask-type:luminance</div>
                    <div class="text-center">FF:O , CHROME:X</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap mask-type-alpha-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">mask-type:alpha</div>
                    <div class="text-center">FF:O , CHROME:O</div>
                </div>
            </div>
            <h3>mask-mode</h3>
            <h3>FF only</h3>
            <div class="flex-wrap bg-var">
                <div class="box-wrap -webkit-mask-image-wrap mask-mode-luminance-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">mask-mode:luminance</div>
                    <div class="text-center">FF:O , CHROME:X</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap mask-mode-alpha-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">mask-mode:alpha</div>
                    <div class="text-center">FF:O , CHROME:X</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap mask-mode-match-source-wrap" >
                    <div class="box bg"></div>
                    <div class="text-center">mask-mode:match-source</div>
                    <div class="text-center">FF:O , CHROME:X</div>
                </div>
            </div>
            <h3>mask-composite , -webkit-mask-composite</h3>
            <h3>(이 둘은 동작에 아주 많은 차이가 있다.)</h3>
            <ul class="text-left">
                <li>mask-composite 는 mask-image 보다 1개 작은 값을 가지며, <br>
                    <s>
                        첫번째 설정은 마지막-1 이미지와 마지막 이미지를 합성한다. = A<br>
                        두번째 설정은 마지막-2 와 A를 합성한다.<br>
                        <a href="https://css-tricks.com/almanac/properties/m/mask-composite/">LINK</a>
                    </s>(잘못된 설명 같다.)
                </li>
                <li>
                    테스트 해본 결과 mask-composite:add,add,add,subtract 처럼 하면 (총 7개의 mask-image)<br>
                    ((((mask-image 1 와 mask-image 2 를 add)와 mask-image 3 를 add)와 mask-image 4 를 add)와 subtract)  이후 전부 subtract
                </li>
            </ul>
            <h4>
            </h4>
            <div class="flex-wrap bg-var">
                <div class="box-wrap -webkit-mask-image-wrap mask-composite-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">mask-composite</div>
                    <div class="text-center">FF:O , CHROME:X</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap -webkit-mask-composite-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">-webkit-mask-composite</div>
                    <div class="text-center">FF:O , CHROME:X</div>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div class="container py-3">
        <h2>mask-composite , -webkit-mask-composite</h2>
        <ul class="text-left">
            <li>mask-composite 는 add, subtract , intersect, exclude(xor) 를 지원하며 </li>
            <li>-webkit-mask-composite 의 source-over , source-out, source-in, xor 에 대응한다.</li>
        </ul>
        <h3>composite 동작 설명</h3>
        <ul class="text-left">
            <li>mask-composite(-webkit-mask-composite)는 마스크 레이어 갯수보다 1개 적게 설정한다.</li>
            <li>합성 순서는 마스크 레이어 밑에서 부터 위로 합성한다.</li>
            <li>최초 합성 시 소스는 n-1 번째 , 타겟은 n 번째 레이어가 된다.</li>
            <li>최초 후 합성 시 소스는 이전 레이어가 되고, 타겟은 이전 작업의 합성 된 결과물이다</li>
            <li>mask-composite 는 sourse-* 기반 밖에 설정 못하기에, 호환성을 염두한다면 전부 소스 기준으로 동작하도록 설정해야한다.(destination-* 등 을 사용하면 안된다.)</li>
        </ul>
        <div>
            <h3>기본모양</h3>
            <div class="flex-wrap bg-var2">
                <div class="box-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">배경모양</div>
                </div>
                <div class="box-wrap bg-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">마스크모양</div>
                </div>
            </div>
            <h3>add = source-over (default value)</h3>
            <ul class="text-left">
                <li>add : The source is placed over the destination.</li>
                <li>source-over : The source mask image is rendered over the destination mask image.</li>
            </ul>
            <div class="flex-wrap bg-var2">
                <div class="box-wrap mask-image-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="mask-composite:add"></div>
                    <div class="text-center">mask-composite:add</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="-webkit-mask-composite:source-over"></div>
                    <div class="text-center">-webkit-mask-composite:source-over</div>
                </div>
            </div>
            <h3>subtract = source-out</h3>
            <ul class="text-left">
                <li>subtract : The source is placed, where it falls outside of the destination.</li>
                <li>source-out : Overlapping pixels in the source mask image and the destination mask image are cleared; all remaining pixels of the source mask image are rendered.</li>
            </ul>
            <div class="flex-wrap bg-var2">
                <div class="box-wrap mask-image-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="mask-composite:subtract"></div>
                    <div class="text-center">mask-composite:subtract</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="-webkit-mask-composite:source-out"></div>
                    <div class="text-center">-webkit-mask-composite:source-out</div>
                </div>
            </div>
            <h3>intersect = source-in</h3>
            <ul class="text-left">
                <li>intersect : The parts of source that overlap the destination, replace the destination.</li>
                <li>source-in : Overlapping pixels in the source mask image and the destination mask image are replaced by the pixels of the source mask image; all other pixels are cleared.</li>
            </ul>
            <div class="flex-wrap bg-var2">
                <div class="box-wrap mask-image-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="mask-composite:intersect"></div>
                    <div class="text-center">mask-composite:intersect</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="-webkit-mask-composite:source-in"></div>
                    <div class="text-center">-webkit-mask-composite:source-in</div>
                </div>
            </div>
            <h3>exclude = xor</h3>
            <ul class="text-left">
                <li>exclude : The non-overlapping regions of source and destination are combined.</li>
                <li>xor : Overlapping pixels in the source mask image and the destination mask image become fully transparent if they are both fully opaque.</li>
            </ul>
            <div class="flex-wrap bg-var2">
                <div class="box-wrap mask-image-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="mask-composite:exclude"></div>
                    <div class="text-center">mask-composite:exclude</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="-webkit-mask-composite:xor"></div>
                    <div class="text-center">-webkit-mask-composite:xor</div>
                </div>
            </div>
        </div>
    </div>
    <div class="container py-3">
        <h2>호환성을 생각한 mask-composite , -webkit-mask-composite</h2>
        <ul class="text-left">
            <li>source-* 기준으로 작업해야한다! </li>
        </ul>
        <div>
            <h3>3개의 mask-image 기본모양</h3>
            <div class="flex-wrap bg-var3">
                <div class="box-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">배경모양</div>
                </div>
                <div class="box-wrap bg-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">마스크모양</div>
                </div>
            </div>
            <h3>3개의 mask-image. add,subtract</h3>
            <div class="flex-wrap bg-var3">
                <div class="box-wrap mask-image-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="mask-composite:add,subtract"></div>
                    <div class="text-center">mask-composite:add,subtract</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="-webkit-mask-composite:source-over,source-out"></div>
                    <div class="text-center">-webkit-mask-composite:source-over,source-out</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="mask-composite:add,subtract; -webkit-mask-composite:source-over,source-out"></div>
                    <div class="text-center">mask-composite:add,subtract; -webkit-mask-composite:source-over,source-out</div>
                </div>
            </div>
            <h3>3개의 mask-image. add,intersect</h3>
            <div class="flex-wrap bg-var3">
                <div class="box-wrap mask-image-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="mask-composite:add,intersect"></div>
                    <div class="text-center">mask-composite:add,intersect</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="-webkit-mask-composite:source-over,source-in"></div>
                    <div class="text-center">-webkit-mask-composite:source-over,source-in</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="mask-composite:add,intersect; -webkit-mask-composite:source-over,source-in"></div>
                    <div class="text-center">mask-composite:add,intersect; -webkit-mask-composite:source-over,source-in</div>
                </div>
            </div>
            <h3>4개의 mask-image 기본모양</h3>
            <div class="flex-wrap bg-var4">
                <div class="box-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">배경모양</div>
                </div>
                <div class="box-wrap bg-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">마스크모양</div>
                </div>
            </div>            
            <h3>4개의 mask-image. add,subtract,intersect = source-over,source-out,source-in</h3>
            <h4>동작 설명</h4>
            <ol class="text-left">
                <li>intersect : 마스크이미지 3번(노란색 사각형, 소스)과 4번(파란색 원, 타겟)의 공통 부분 추출 </li>
                <li>subtract : 마스크이미지 2번(연두 사각형, 소스)을 위의 결과(타겟)로 뺀다.</li>
                <li>add : 마스크이미지 1번(붉은 원, 소스)을 위의 결과(타겟)로 합친다.</li>
            </ol>

            <div class="flex-wrap bg-var4">
                <div class="box-wrap mask-image-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="mask-composite:add,subtract,intersect"></div>
                    <div class="text-center">mask-composite:add,subtract,intersect</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="-webkit-mask-composite:source-over,source-out,source-in"></div>
                    <div class="text-center">-webkit-mask-composite:source-over,source-out,source-in</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="mask-composite:add,subtract,intersect; -webkit-mask-composite:source-over,source-out,source-in"></div>
                    <div class="text-center">mask-composite:add,subtract,intersect; -webkit-mask-composite:source-over,source-out,source-in</div>
                </div>
            </div>
        </div>
        <div class="container py-3">
            <h2>destination-out 구현을 위한 방법</h2>
            <ul class="text-left">
                <li>destination-out 을 사용할 수 없으므로, 소스 레이어를 반전해서 intersect(source-in) 로 동작 </li>
            </ul>
            <h3>4개의 mask-image 기본모양 (2)</h3>
            <ul class="text-left">
                <li>붉은색에 빈 원이 반전된 소스 레이어</li>
            </ul>
            <div class="flex-wrap bg-var5">
                <div class="box-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">배경모양</div>
                </div>
                <div class="box-wrap bg-wrap">
                    <div class="box bg"></div>
                    <div class="text-center">마스크모양</div>
                </div>
            </div>
            <h3>destination-out 구현</h3>
            <div class="flex-wrap bg-var5">
                <div class="box-wrap mask-image-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="mask-composite:intersect,subtract,intersect"></div>
                    <div class="text-center">mask-composite:intersect,subtract,intersect</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="-webkit-mask-composite:source-in,source-out,source-in"></div>
                    <div class="text-center">-webkit-mask-composite:source-in,source-out,source-in</div>
                </div>
                <div class="box-wrap -webkit-mask-image-wrap">
                    <div class="box bg" style="mask-composite:intersect,subtract,intersect; -webkit-mask-composite:source-in,source-out,source-in"></div>
                    <div class="text-center">mask-composite:intersect,subtract,intersect; -webkit-mask-composite:source-in,source-out,source-in</div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>