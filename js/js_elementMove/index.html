<!doctype html>
<html lang="ko" >
<head>
	<title>js elementMove</title>
	<meta charset="utf-8">
	<meta http-equiv="Content-Script-Type" content="text/javascript">
	<meta http-equiv="Content-Style-Type" content="text/css">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="shortcut icon" href="http://www.mins01.com/favicon.ico">	
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<script src="/js/ForGoogle.js"></script>
	<!-- google analytics -->
	<script>if(window.ForGoogle){ ForGoogle.analytics() }else{ console.log("failure : ForGoogle.analytics()");}</script>
	

	<!-- jquery 관련 -->
	<script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>

	<!-- 부트스트랩 4 : IE8지원안됨! -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" crossorigin="anonymous"> 
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" crossorigin="anonymous"></script>  -->
	<!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" crossorigin="anonymous"></script> -->
	<!-- vue.js -->
	<!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->
	
	<!-- meta og -->
	
	<meta property="og:title" content="js elementMove">
	<meta property="og:description" content="js elementMove">
	<meta name="og:image" content="http://www.mins01.com/img/logo.gif">
	<meta property="og:image:width" content="190">
	<meta property="og:image:height" content="70" />
	<meta property="og:site_name" content="js elementMove" />
	<meta property="og:type" content="website">
	
	<!-- //meta og -->
	<link rel="stylesheet" href="elementMove.css">
	<script src="ElementMove.js"></script>
	<script>
		let em1 = null;
		let em2 = null;
		let em3 = null;
		let em3_1 = null;
		let em4 = null;
		let em5 = null;
		let em5_1 = null;
		let em5_2 = null;
		let em5_3 = null;
		let em5_4 = null;
		let em5_5 = null;
		let em5_6 = null;
		let em5_7 = null;
		let em5_8 = null;
		let em5_9 = null;
		let em6 = null;
		let em7 = null;
		let em8 = null;
		window.addEventListener('load',(event)=>{
			// ElementMove.init(document.querySelector('#area1'));
			// ElementMove.init(document.querySelector('#area2'));
			em1 = new ElementMove(document.querySelector('#area1'))
			em2 = new ElementMove(document.querySelector('#area2'))
			em3 = new ElementMove(document.querySelector('#area3'))
			em3_1 = new ElementMove(document.querySelector('#area3_1'))
			em4 = new ElementMove(document.querySelector('#area4'))
			em5_1 = new ElementMove(document.querySelector('#area5_1'))
			em5_2 = new ElementMove(document.querySelector('#area5_2'))
			em5_3 = new ElementMove(document.querySelector('#area5_3'))
			em5_4 = new ElementMove(document.querySelector('#area5_4'))
			em5_5 = new ElementMove(document.querySelector('#area5_5'))
			em5_6 = new ElementMove(document.querySelector('#area5_6'))
			em5_7 = new ElementMove(document.querySelector('#area5_7'))
			em5_8 = new ElementMove(document.querySelector('#area5_8'))
			em5_9 = new ElementMove(document.querySelector('#area5_9'))
			em5 = new ElementMove(document.querySelector('#area5'))
			em6 = new ElementMove(document.querySelector('#area6'))
			em7 = new ElementMove(document.querySelector('#area7'))
			em8 = new ElementMove(document.querySelector('#area8'))
		})
	</script>
	<style>
		.box{outline: 2px dotted #ff000099; background-color: #ff000099;width:50px; height:50px;}
		.box-hover:hover,.box-hover.hover{
			filter: invert(1);
		}
		.flex-center{
			display: flex;
			flex-direction: row;
			flex-wrap: nowrap;
			align-content: center;
			justify-content: center;
			align-items: center;
			white-space: nowrap;
		}
		.flex-center.flex-top{
			align-items: flex-start;
		}

		.margin-center{margin:0 auto;}

		.element-move-target{outline: 1px solid #0000ff99; background-color: #ccbbccaa; }
		.element-move-isolation{outline: 2px dotted #ff990099; background-color: #ff990099; 
			display: flex;
			flex-wrap: nowrap;
			align-content: center;
			justify-content: center;
			align-items: center;
			width: 400px; height: 400px;
		}
		.element-move-area{outline: 2px dotted #99ff9999;background-color: #99ff9999; width: 300px; height: 300px;}
		
	</style>
</head>
<body>
	<div class="container pb-3">
		<h1>js elementMove</h1>
		<hr>
		<h3>data-move-type="transform"</h3>
		<div id="area1" class="element-move-area margin-center" data-move-type="transform">
			<div id="area1-target1" class="element-move-target box flex-center" onpointerup="console.log('이동 종료')">1</div>
			<div id="area1-target2" class="element-move-target box flex-center">2</div>
		</div>
		<hr>
		<h3>data-move-type="position"</h3>
		<div id="area2" class="element-move-area margin-center" data-move-type="position">
			<div id="area2-target1" class="element-move-target box flex-center">1</div>
			<div id="area2-target2" class="element-move-target box flex-center">2<span>asdasd</span></div>
		</div>

		<hr>
		<h3>data-move-type="transform" with data-move-isolation="in"</h3>
		<div id="area3" class="element-move-area element-move-isolation margin-center" data-move-type="transform" data-move-isolation="in">
			<div id="area3-target1" class="element-move-target box flex-center">1</div>
			<div id="area3-target2" class="element-move-target box flex-center">2</div>
		</div>
		<hr>
		<h3>data-move-type="transform" with data-move-isolation="center"</h3>
		<div id="area3_1" class="element-move-area element-move-isolation margin-center" data-move-type="transform" data-move-isolation="center">
			<div id="area3_1-target1" class="element-move-target box flex-center">1</div>
			<div id="area3_1-target2" class="element-move-target box flex-center">2</div>
		</div>
		<hr>
		<h3>data-move-type="position" with data-move-isolation="in"</h3>
		<div id="area4" class="element-move-area element-move-isolation margin-center" data-move-type="position" data-move-isolation="in">
			<div id="area4-target1" class="element-move-target box flex-center">1</div>
			<div id="area4-target2" class="element-move-target box flex-center">2</div>
		</div>
		<h3>data-move-type="position" with data-move-isolation="center"</h3>
		<div id="area5" class="element-move-area element-move-isolation margin-center" data-move-type="position" data-move-isolation="center">
			<div id="area5-target1" class="element-move-target box flex-center">1</div>
			<div id="area5-target2" class="element-move-target box flex-center">2</div>
		</div>

		<h3>.element-move-isolation with data-move-type="position" with data-move-isolation="in"</h3>
		<div class="element-move-isolation margin-center">
			<div id="area5_1" class="element-move-area margin-center" data-move-type="position" data-move-isolation="in">
				<div id="area5_1-target1" class="element-move-target box flex-center">1</div>
				<div id="area5_1-target2" class="element-move-target box flex-center">2</div>
			</div>
		</div>

		<h3>.element-move-isolation with data-move-type="position" with data-move-isolation="center"</h3>
		<div class="element-move-isolation margin-center">
			<div id="area5_2" class="element-move-area margin-center" data-move-type="position" data-move-isolation="center">
				<div id="area5_2-target1" class="element-move-target box flex-center">1</div>
				<div id="area5_2-target2" class="element-move-target box flex-center">2</div>
			</div>
		</div>

		<h3>.element-move-isolation with data-move-type="transform" with data-move-isolation="in"</h3>
		<div class="element-move-isolation margin-center">
			<div id="area5_3" class="element-move-area margin-center" data-move-type="transform" data-move-isolation="in">
				<div id="area5_3-target1" class="element-move-target box flex-center">1</div>
				<div id="area5_3-target2" class="element-move-target box flex-center">2</div>
			</div>
		</div>

		<h3>.element-move-isolation with data-move-type="transform" with data-move-isolation="center"</h3>
		<div class="element-move-isolation margin-center">
			<div id="area5_4" class="element-move-area margin-center" data-move-type="transform" data-move-isolation="center">
				<div id="area5_4-target1" class="element-move-target box flex-center">1</div>
				<div id="area5_4-target2" class="element-move-target box flex-center">2</div>
			</div>
		</div>

		<h3>.element-move-isolation with data-move-type="transform" with data-move-isolation="out"</h3>
		<div class="element-move-isolation margin-center">
			<div id="area5_5" class="element-move-area margin-center" data-move-type="transform" data-move-isolation="out">
				<div id="area5_5-target1" class="element-move-target box flex-center">1</div>
				<div id="area5_5-target2" class="element-move-target box flex-center">2</div>
			</div>
		</div>

		<h3>.element-move-isolation with data-move-type="transform" with data-move-isolation="100"</h3>
		<div class="element-move-isolation margin-center">
			<div id="area5_6" class="element-move-area margin-center" data-move-type="transform" data-move-isolation="100">
				<div id="area5_6-target1" class="element-move-target box flex-center">1</div>
				<div id="area5_6-target2" class="element-move-target box flex-center">2</div>
			</div>
		</div>

		<h3>.element-move-isolation with data-move-type="transform" with data-move-isolation="-100"</h3>
		<div class="element-move-isolation margin-center">
			<div id="area5_7" class="element-move-area margin-center" data-move-type="transform" data-move-isolation="-100">
				<div id="area5_7-target1" class="element-move-target box flex-center">1</div>
				<div id="area5_7-target2" class="element-move-target box flex-center">2</div>
			</div>
		</div>

		<h3>.element-move-isolation with data-move-type="transform" with data-move-isolation=""</h3>
		<div class="element-move-isolation margin-center">
			<div id="area5_8" class="element-move-area margin-center" data-move-type="transform" data-move-isolation="">
				<div class="element-move-target box flex-center flex-top"style="--move-x: 541px; --move-y: 0px;" ><button class="btn btn-sm btn-info" type="button" onclick="ElementMove.isolate('in',this)">isolate(in)</button></div>
				<div class="element-move-target box flex-center flex-top"style="--move-x: 541px; --move-y: 0px;" ><button class="btn btn-sm btn-info" type="button" onclick="ElementMove.isolate('center',this)">isolate(center)</button></div>
				<div class="element-move-target box flex-center flex-top"style="--move-x: 541px; --move-y: 0px;" ><button class="btn btn-sm btn-info" type="button" onclick="ElementMove.isolate('out',this)">isolate(out)</button></div>
				<div class="element-move-target box flex-center flex-top"style="--move-x: 541px; --move-y: 0px;" ><button class="btn btn-sm btn-info" type="button" onclick="ElementMove.isolate('none',this)">isolate(none)</button></div>
				<div class="element-move-target box flex-center flex-top"style="--move-x: 541px; --move-y: 0px;" ><button class="btn btn-sm btn-info" type="button" onclick="ElementMove.isolate('100',this)">isolate(100)</button></div>
				<div class="element-move-target box flex-center flex-top"style="--move-x: 541px; --move-y: 0px;" ><button class="btn btn-sm btn-info" type="button" onclick="ElementMove.isolate('-100',this)">isolate(-100)</button></div>
			</div>
		</div>

		<h3>.element-move-isolation with data-move-type="transform"</h3>
		<div class="element-move-isolation margin-center">
			<div id="area5_9" class="element-move-area margin-center" data-move-type="transform" >
				<div class="element-move-target box flex-center flex-top"style="--move-x: 541px; --move-y: 0px;" ><button class="btn btn-sm btn-info" type="button" onclick="ElementMove.isolate('in',this)">isolate(in)</button></div>
				<div class="element-move-target box flex-center flex-top"style="--move-x: 541px; --move-y: 0px;" ><button class="btn btn-sm btn-info" type="button" onclick="ElementMove.isolate('center',this)">isolate(center)</button></div>
				<div class="element-move-target box flex-center flex-top"style="--move-x: 541px; --move-y: 0px;" ><button class="btn btn-sm btn-info" type="button" onclick="ElementMove.isolate('out',this)">isolate(out)</button></div>
				<div class="element-move-target box flex-center flex-top"style="--move-x: 541px; --move-y: 0px;" ><button class="btn btn-sm btn-info" type="button" onclick="ElementMove.isolate('none',this)">isolate(none)</button></div>
				<div class="element-move-target box flex-center flex-top"style="--move-x: 541px; --move-y: 0px;" ><button class="btn btn-sm btn-info" type="button" onclick="ElementMove.isolate('100',this)">isolate(100)</button></div>
				<div class="element-move-target box flex-center flex-top"style="--move-x: 541px; --move-y: 0px;" ><button class="btn btn-sm btn-info" type="button" onclick="ElementMove.isolate('-100',this)">isolate(-100)</button></div>
			</div>
		</div>


		<hr>
		<h3>lementMove.hitTest(), ElementMove.moveToTarget(), ElementMove.resetMove(), event onpointerup</h3>
		<div id="area6" class="element-move-area element-move-isolation margin-center" data-move-type="position" data-move-isolation="center">
			<div id="area6-target1" class="element-move-target box flex-center" onpointermove="hitTest(event,this,document.querySelector('#area6-box1'))" onpointerup="let r = hitTest(event,this,document.querySelector('#area6-box1'));console.log('hitTest',r); if(r){ElementMove.moveToTarget(this,document.querySelector('#area6-box1'))}else{ElementMove.resetMove(this)}">1</div>
			<div id="area6-target2" class="element-move-target box flex-center" style="--move-x:100px;--move-y:10px" onpointermove="hitTest(event,this,document.querySelector('#area6-box2'))" onpointerup="let r = hitTest(event,this,document.querySelector('#area6-box2'));console.log('hitTest',r); if(r){ElementMove.moveToTarget(this,document.querySelector('#area6-box3'))}else{ElementMove.resetMove(this)}">2</div>

			<div id="area6-box1" class="box flex-center box-hover" style="position: absolute; left:200px; top:50px">HERE 1</div>
			<div id="area6-box2" class="box flex-center box-hover" style="width:100px;height:100px;padding:25px; background-color: #0000ff33;position: absolute; left:200px; top:200px ">
				<div id="area6-box3" class="box flex-center">HERE 2</div>
			</div>
		</div>
		<script>
		function hitTest(event,target,hitedTarget){
			const els = document.elementsFromPoint(event.clientX, event.clientY);
			document.querySelectorAll('.hover').forEach((el)=>{el.classList.remove('hover')})
			let r =  els.find(el=>{if(el===hitedTarget){ hitedTarget.classList.add('hover'); return true}});
			return !!r;
    }
		</script>

		<hr>
		<h3>pointer-events: none with PointerEvent empointerup</h3>
		<div id="area7" class="element-move-area margin-center" data-move-type="position" data-move-isolation="center">
			<div id="area7-target1" class="element-move-target box flex-center" onpointerup="">1</div>
			<div id="area7-target2" class="element-move-target box flex-center" style="--move-x:100px;--move-y:10px"  onpointerup="">2</div>

			<div id="area7-box1" class="box flex-center box-hover" style="position: absolute; left:200px; top:50px">HERE 1</div>
			<div id="area7-box2" class="box flex-center box-hover" style="width:100px;height:100px;padding:25px; background-color: #0000ff33;position: absolute; left:200px; top:200px ">
				<div id="area7-box3" class="box flex-center">HERE 2</div>
			</div>
		</div>
		<style>
			.element-move-target-moving#area7-target1{
				pointer-events: none;
			}
			.element-move-target-moving#area7-target2{
				pointer-events: none;
			}
		</style>
		<script>
			document.querySelector('#area7-target1').addEventListener('empointerup',function(event){
				console.log(event.detail.elementMove,event.detail.event);
				const els = document.elementsFromPoint(event.detail.event.clientX, event.detail.event.clientY);
        let r =  els.find(el=>{return el===document.querySelector('#area7-box1')});

				console.log('hitedTarget',r); 
				if(r){ElementMove.moveToTarget(this,document.querySelector('#area7-box1'))}else{ElementMove.resetMove(this)}
			})
			document.querySelector('#area7-target2').addEventListener('empointerdown',function(event){
				console.log(event.type,event.detail.event.pageX,event.detail.event.pageY);
			})
			document.querySelector('#area7-target2').addEventListener('empointermove',function(event){
				console.log(event.type,event.detail.event.pageX,event.detail.event.pageY);
			})
			document.querySelector('#area7-target2').addEventListener('empointerup',function(event){
				console.log(event.type,event.detail.event.pageX,event.detail.event.pageY);
				const els = document.elementsFromPoint(event.detail.event.clientX, event.detail.event.clientY);
        let r =  els.find(el=>{return el===document.querySelector('#area7-box2')});

				console.log('hitTest',r); 
				if(r){ElementMove.moveToTarget(this,document.querySelector('#area7-box3'))}else{ElementMove.resetMove(this)}
			})
		</script>

		<hr>
		<h3>--move-y:125px !important, --move-x:125px !important</h3>
		<div id="area8" class="element-move-area element-move-isolation margin-center" data-move-type="position" data-move-isolation="center">
			<div id="area8-target1" class="element-move-target box flex-center" style="--move-x:100px" >1</div>
			<div id="area8-target2" class="element-move-target box flex-center" style="--move-x:100px;--move-y:10px"  style="--move-x:125px" >2</div>
		</div>
		<style>
			#area8-target1{
				--move-y:125px !important
			}
			#area8-target2{
				--move-x:125px !important
			}
		</style>
	</div>
	
</body>
</html>